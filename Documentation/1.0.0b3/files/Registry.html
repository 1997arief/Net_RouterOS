<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>PEAR2_Net_RouterOS documentation</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" href="../css/template.css" type="text/css"></link><script type="text/javascript" src="../js/jquery-1.4.2.min.js"></script><script type="text/javascript" src="../js/jquery.tools.min.js"></script><script type="text/javascript" src="../js/jquery-ui-1.8.2.custom.min.js"></script><script type="text/javascript" src="../js/template.js"></script></head><body><div xmlns="" id="content">
<h1 class="file">Registry.php</h1>
<div id="file-nav-box">
<div id="file-nav-options">
              Show:
              <img src="../images/icons/visibility_public.png" id="show-public"><img src="../images/icons/visibility_protected.png" id="show-protected"><img src="../images/icons/visibility_private.png" id="show-private"><span class="attribute" id="show-inherited">inherited</span>
</div>
<div id="file-nav-container">
<ul id="file-nav"><li>
<a href="#classes"><img src="../images/icons/class.png" height="14">
                          Classes
                      </a><ul><li><a href="#%5CPEAR2%5CNet%5CRouterOS%5CRegistry">\PEAR2\Net\RouterOS\Registry</a></li></ul>
</li></ul>
<div style="clear: left;"></div>
</div>
<div id="file-nav-tab">
              Table of Contents
          </div>
</div>
<a name="top" class="anchor"></a><div id="file-description">
<div xmlns="http://www.w3.org/1999/xhtml" class="short-description">RouterOS API client implementation.</div><div xmlns="http://www.w3.org/1999/xhtml" class="long-description"><p>RouterOS is the flag product of the company MikroTik and is a powerful router software. One of its many abilities is to allow control over it via an API. This package provides a client for that API, in turn allowing you to use PHP to control RouterOS hosts.</p>

<p>PHP version 5</p></div>
</div>
<dl class="file-info">
<dt xmlns="http://www.w3.org/1999/xhtml">Author</dt><dd xmlns="http://www.w3.org/1999/xhtml"><a href="mailto:boen.robot@gmail.com">Vasil Rangelov</a>
         
    </dd><dt xmlns="http://www.w3.org/1999/xhtml">Category</dt><dd xmlns="http://www.w3.org/1999/xhtml">Net
         
    </dd><dt xmlns="http://www.w3.org/1999/xhtml">Copyright</dt><dd xmlns="http://www.w3.org/1999/xhtml">2011 Vasil Rangelov
         
    </dd><dt xmlns="http://www.w3.org/1999/xhtml">License</dt><dd xmlns="http://www.w3.org/1999/xhtml"><a href="http://www.gnu.org/copyleft/lesser.html">LGPL License 2.1</a>
         
    </dd><dt xmlns="http://www.w3.org/1999/xhtml">Link</dt><dd xmlns="http://www.w3.org/1999/xhtml"><a href="http://pear2.php.net/PEAR2_Net_RouterOS">http://pear2.php.net/PEAR2_Net_RouterOS</a>
         
    </dd><dt xmlns="http://www.w3.org/1999/xhtml">Package</dt><dd xmlns="http://www.w3.org/1999/xhtml">PEAR2_Net_RouterOS
         
    </dd><dt xmlns="http://www.w3.org/1999/xhtml">Version</dt><dd xmlns="http://www.w3.org/1999/xhtml">1.0.0b3
         
    </dd>
</dl>
<a name="classes" class="anchor"></a><a id="\PEAR2\Net\RouterOS\Registry" class="anchor"></a><h2 class="class">\PEAR2\Net\RouterOS\Registry<div class="to-top"><a href="#top">jump to top</a></div>
</h2>
<div class="class">
<small class="package"><b>Package: </b>PEAR2\Net\RouterOS</small><div xmlns="http://www.w3.org/1999/xhtml" class="short-description">A RouterOS registry.</div><div xmlns="http://www.w3.org/1999/xhtml" class="long-description"><p>Provides functionality for managing the request/response flow. Particularly
useful in persistent connections.</p></div><dl class="class-info">
<dt xmlns="http://www.w3.org/1999/xhtml">Author</dt><dd xmlns="http://www.w3.org/1999/xhtml"><a href="mailto:boen.robot@gmail.com">Vasil Rangelov</a>
         
    </dd><dt xmlns="http://www.w3.org/1999/xhtml">Category</dt><dd xmlns="http://www.w3.org/1999/xhtml">Net
         
    </dd><dt xmlns="http://www.w3.org/1999/xhtml">License</dt><dd xmlns="http://www.w3.org/1999/xhtml"><a href="http://www.gnu.org/copyleft/lesser.html">LGPL License 2.1</a>
         
    </dd><dt xmlns="http://www.w3.org/1999/xhtml">Link</dt><dd xmlns="http://www.w3.org/1999/xhtml"><a href="http://pear2.php.net/PEAR2_Net_RouterOS">http://pear2.php.net/PEAR2_Net_RouterOS</a>
         
    </dd>
</dl>
<h3>Properties</h3>
<div>
<a id="\PEAR2\Net\RouterOS\Registry::$instanceId" class="anchor"></a><div class="property protected">
<a href="#" class="gripper"><img src="../images/icons/arrow_right.png"><img src="../images/icons/arrow_down.png" style="display: none;"></a><code class="title"><img src="../images/icons/property.png" alt="Property"><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected">int <span class="highlight">$instanceId</span></code><div class="description"><div xmlns="http://www.w3.org/1999/xhtml" class="short-description"><p>ID of instance within the request.</p></div></div>
<div class="code-tabs">
<div xmlns="http://www.w3.org/1999/xhtml" class="long-description"></div><strong>Details</strong><dl class="property-info">
<dt>Type</dt>
<dd>int</dd>
</dl>
</div>
<div class="clear"></div>
</div>
<a id="\PEAR2\Net\RouterOS\Registry::$instanceIdSeed" class="anchor"></a><div class="property protected">
<a href="#" class="gripper"><img src="../images/icons/arrow_right.png"><img src="../images/icons/arrow_down.png" style="display: none;"></a><code class="title"><img src="../images/icons/property.png" alt="Property"><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected">int <span class="highlight">$instanceIdSeed</span> = -1</code><div class="description">
<span class="attribute">static</span><div xmlns="http://www.w3.org/1999/xhtml" class="short-description"><p>ID to be given to next instance, after incrementing it.</p></div>
</div>
<div class="code-tabs">
<div xmlns="http://www.w3.org/1999/xhtml" class="long-description"></div><strong>Default value</strong><code>-1</code><strong>Details</strong><dl class="property-info">
<dt>Type</dt>
<dd>int</dd>
</dl>
</div>
<div class="clear"></div>
</div>
<a id="\PEAR2\Net\RouterOS\Registry::$requestId" class="anchor"></a><div class="property protected">
<a href="#" class="gripper"><img src="../images/icons/arrow_right.png"><img src="../images/icons/arrow_down.png" style="display: none;"></a><code class="title"><img src="../images/icons/property.png" alt="Property"><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected">int <span class="highlight">$requestId</span> = -1</code><div class="description">
<span class="attribute">static</span><div xmlns="http://www.w3.org/1999/xhtml" class="short-description"><p>ID of request. Populated at first instance in request.</p></div>
</div>
<div class="code-tabs">
<div xmlns="http://www.w3.org/1999/xhtml" class="long-description"></div><strong>Default value</strong><code>-1</code><strong>Details</strong><dl class="property-info">
<dt>Type</dt>
<dd>int</dd>
</dl>
</div>
<div class="clear"></div>
</div>
<a id="\PEAR2\Net\RouterOS\Registry::$shm" class="anchor"></a><div class="property protected">
<a href="#" class="gripper"><img src="../images/icons/arrow_right.png"><img src="../images/icons/arrow_down.png" style="display: none;"></a><code class="title"><img src="../images/icons/property.png" alt="Property"><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected">\PEAR2\Cache\SHM <span class="highlight">$shm</span></code><div class="description"><div xmlns="http://www.w3.org/1999/xhtml" class="short-description"><p>The storage.</p></div></div>
<div class="code-tabs">
<div xmlns="http://www.w3.org/1999/xhtml" class="long-description"></div><strong>Details</strong><dl class="property-info">
<dt>Type</dt>
<dd>\PEAR2\Cache\SHM</dd>
</dl>
</div>
<div class="clear"></div>
</div>
</div>
<h3>Methods</h3>
<div>
<a id="\PEAR2\Net\RouterOS\Registry::__construct()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="../images/icons/arrow_right.png"><img src="../images/icons/arrow_down.png" style="display: none;"></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">__construct</span><span class="nb-faded-text">(string $uri)</span> : void</code><div class="description"><p class="short_description">Creates a registry.</p></div>
<div class="code-tabs">
<div xmlns="http://www.w3.org/1999/xhtml" class="long-description"></div><strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$uri</th>
<td>string</td>
<td><em><p>An URI to bind the registry to.</p></em></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\PEAR2\Net\RouterOS\Registry::__destruct()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="../images/icons/arrow_right.png"><img src="../images/icons/arrow_down.png" style="display: none;"></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">__destruct</span><span class="nb-faded-text">()</span> : void</code><div class="description"><p class="short_description">Removes this instance's buffer.</p></div>
<div class="code-tabs"><div xmlns="http://www.w3.org/1999/xhtml" class="long-description"></div></div>
<div class="clear"></div>
</div>
<a id="\PEAR2\Net\RouterOS\Registry::_add()" class="anchor"></a><div class="method private">
<a href="#" class="gripper"><img src="../images/icons/arrow_right.png"><img src="../images/icons/arrow_down.png" style="display: none;"></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"><span class="highlight">_add</span><span class="nb-faded-text">(<a xmlns="http://www.w3.org/1999/xhtml" href="../files/Response.html#\PEAR2\Net\RouterOS\Response">\PEAR2\Net\RouterOS\Response</a> $response, \PEAR2\Net\RouterOS\type $targetBufferName)</span> : void</code><div class="description"><p class="short_description">Adds a response to a buffer.</p></div>
<div class="code-tabs">
<div xmlns="http://www.w3.org/1999/xhtml" class="long-description"></div><strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$response</th>
<td><a xmlns="http://www.w3.org/1999/xhtml" href="../files/Response.html#\PEAR2\Net\RouterOS\Response">\PEAR2\Net\RouterOS\Response</a></td>
<td><em><p>The response to add.</p></em></td>
</tr>
<tr>
<th>$targetBufferName</th>
<td>\PEAR2\Net\RouterOS\type</td>
<td><em><p>The name of the buffer to add the response to.</p></em></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\PEAR2\Net\RouterOS\Registry::_close()" class="anchor"></a><div class="method private">
<a href="#" class="gripper"><img src="../images/icons/arrow_right.png"><img src="../images/icons/arrow_down.png" style="display: none;"></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"><span class="highlight">_close</span><span class="nb-faded-text">(string $targetBufferName)</span> : void</code><div class="description"><p class="short_description">Removes a buffer.</p></div>
<div class="code-tabs">
<div xmlns="http://www.w3.org/1999/xhtml" class="long-description"></div><strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$targetBufferName</th>
<td>string</td>
<td><em><p>The buffer to remove.</p></em></td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\PEAR2\Net\RouterOS\Registry::add()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="../images/icons/arrow_right.png"><img src="../images/icons/arrow_down.png" style="display: none;"></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">add</span><span class="nb-faded-text">(<a xmlns="http://www.w3.org/1999/xhtml" href="../files/Response.html#\PEAR2\Net\RouterOS\Response">\PEAR2\Net\RouterOS\Response</a> $response, string $ownershipTag)</span> : bool</code><div class="description"><p class="short_description">Add a response to the registry.</p></div>
<div class="code-tabs">
<div xmlns="http://www.w3.org/1999/xhtml" class="long-description"></div><strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$response</th>
<td><a xmlns="http://www.w3.org/1999/xhtml" href="../files/Response.html#\PEAR2\Net\RouterOS\Response">\PEAR2\Net\RouterOS\Response</a></td>
<td><em><p>The response to add. The caller of this function is responsible for ensuring that the ownership tag and the original tag are separated, so that only the original one remains in the response.</p></em></td>
</tr>
<tr>
<th>$ownershipTag</th>
<td>string</td>
<td><em><p>The ownership tag that the response had.</p></em></td>
</tr>
</table>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>bool</td>
<td>TRUE if the request was added to its buffer, FALSE if this instance owns the response, and therefore doesn't need to add the response to its buffer.</td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\PEAR2\Net\RouterOS\Registry::close()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="../images/icons/arrow_right.png"><img src="../images/icons/arrow_down.png" style="display: none;"></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">close</span><span class="nb-faded-text">()</span> : void</code><div class="description"><p class="short_description">Closes the registry.</p></div>
<div class="code-tabs"><div xmlns="http://www.w3.org/1999/xhtml" class="long-description"><p>Closes the registry, meaning that all buffers are cleared.</p></div></div>
<div class="clear"></div>
</div>
<a id="\PEAR2\Net\RouterOS\Registry::getNextResponse()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="../images/icons/arrow_right.png"><img src="../images/icons/arrow_down.png" style="display: none;"></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">getNextResponse</span><span class="nb-faded-text">()</span> : <a xmlns="http://www.w3.org/1999/xhtml" href="../files/Response.html#\PEAR2\Net\RouterOS\Response">\PEAR2\Net\RouterOS\Response</a> | null</code><div class="description"><p class="short_description">Gets the next response from this instance's buffer.</p></div>
<div class="code-tabs">
<div xmlns="http://www.w3.org/1999/xhtml" class="long-description"></div><strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>
<a xmlns="http://www.w3.org/1999/xhtml" href="../files/Response.html#\PEAR2\Net\RouterOS\Response">\PEAR2\Net\RouterOS\Response</a> | null</td>
<td>The next response, or NULL if there isn't one.</td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\PEAR2\Net\RouterOS\Registry::getOwnershipTag()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="../images/icons/arrow_right.png"><img src="../images/icons/arrow_down.png" style="display: none;"></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">getOwnershipTag</span><span class="nb-faded-text">()</span> : string</code><div class="description"><p class="short_description">Get the ownership tag for this instance.</p></div>
<div class="code-tabs">
<div xmlns="http://www.w3.org/1999/xhtml" class="long-description"></div><strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>string</td>
<td>The ownership tag for this registry instance.</td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\PEAR2\Net\RouterOS\Registry::isTaglessModeOwner()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="../images/icons/arrow_right.png"><img src="../images/icons/arrow_down.png" style="display: none;"></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">isTaglessModeOwner</span><span class="nb-faded-text">()</span> : bool</code><div class="description"><p class="short_description">Checks if this instance is the tagless mode owner.</p></div>
<div class="code-tabs">
<div xmlns="http://www.w3.org/1999/xhtml" class="long-description"></div><strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>bool</td>
<td>TRUE if this instance is the tagless mode owner, FALSE otherwise.</td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\PEAR2\Net\RouterOS\Registry::parseTag()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="../images/icons/arrow_right.png"><img src="../images/icons/arrow_down.png" style="display: none;"></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">parseTag</span><span class="nb-faded-text">(string $tag)</span> : array</code><div class="description">
<span class="attribute">static</span><p class="short_description">Parses a tag.</p>
</div>
<div class="code-tabs">
<div xmlns="http://www.w3.org/1999/xhtml" class="long-description"><p>Parses a tag to reveal the ownership part of it, and the original tag.</p></div><strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$tag</th>
<td>string</td>
<td><em><p>The tag (as received) to parse.</p>
</em></td>
</tr>
</table>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>array</td>
<td>An array with the first member being the ownership tag, and the second one being the original tag.</td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
<a id="\PEAR2\Net\RouterOS\Registry::setTaglessMode()" class="anchor"></a><div class="method public">
<a href="#" class="gripper"><img src="../images/icons/arrow_right.png"><img src="../images/icons/arrow_down.png" style="display: none;"></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"><span class="highlight">setTaglessMode</span><span class="nb-faded-text">(bool $taglessMode)</span> : bool</code><div class="description"><p class="short_description">Sets the "tagless mode" setting.</p></div>
<div class="code-tabs">
<div xmlns="http://www.w3.org/1999/xhtml" class="long-description"><p>While in tagless mode, this instance will claim owhership of any
responses without a tag. While not in this mode, any requests without a
tag will be given to all instances.</p>

<p>Regardless of mode, if the type of the response is
<a href="Response::TYPE_FATAL">Response::TYPE_FATAL</a>, it will be given to all instances.</p></div><strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$taglessMode</th>
<td>bool</td>
<td><em><p>TRUE to claim tagless ownership, FALSE to release such ownership, if taken.</p></em></td>
</tr>
</table>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>bool</td>
<td>TRUE on success, FALSE on failure.</td>
</tr>
</table>
</div>
<div class="clear"></div>
</div>
</div>
</div>
</div>
<small xmlns="" class="footer">
            Documentation was generated by
            <a href="http://phpdoc.org">phpDocumentor
                2.0.0a8</a>.
        </small></body></html>
