<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>PEAR2_Net_RouterOS: PEAR2/Net/RouterOS/Communicator.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PEAR2_Net_RouterOS
   &#160;<span id="projectnumber">1.0.0b5</span>
   </div>
   <div id="projectbrief">A MikroTik RouterOS client</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_communicator_8php_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Communicator.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_communicator_8php.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?php</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_p_e_a_r2_1_1_net_1_1_router_o_s.html">PEAR2\Net\RouterOS</a>;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;use PEAR2\Net\Transmitter as T;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html">   44</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html">Communicator</a></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a60cf02f6ed2d0bb98867d38cabc4ca5d">   49</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a60cf02f6ed2d0bb98867d38cabc4ca5d">CHARSET_ALL</a> = -1;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    </div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ae069d6168ef5b97ed220f308670db940">   58</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ae069d6168ef5b97ed220f308670db940">CHARSET_REMOTE</a> = 0;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    </div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#af5a8a11fc100eb8f83467fc4a88d5324">   67</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#af5a8a11fc100eb8f83467fc4a88d5324">CHARSET_LOCAL</a> = 1;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    </div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a3fb4c9535d68ae71e3b82f25a5c61510">   73</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">static</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a3fb4c9535d68ae71e3b82f25a5c61510">$defaultCharsets</a> = array(</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        self::CHARSET_REMOTE =&gt; null,</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        self::CHARSET_LOCAL  =&gt; null</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    );</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    </div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ae269ee30c94deb9b791c1ae5489b88f3">   82</a></span>&#160;    <span class="keyword">protected</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ae269ee30c94deb9b791c1ae5489b88f3">$charsets</a> = array();</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ac75852aae94b46848119a6d7c922cf2e">   87</a></span>&#160;    <span class="keyword">protected</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ac75852aae94b46848119a6d7c922cf2e">$trans</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a313217fc0e0cc04f49c0e637b2f64271">  113</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a313217fc0e0cc04f49c0e637b2f64271">__construct</a>(</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        $host,</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        $port = 8728,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        $persist = <span class="keyword">false</span>,</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        $timeout = null,</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        $key = <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        $crypto = T\NetworkStream::CRYPTO_OFF,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        $context = null</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    ) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        $isUnencrypted = T\NetworkStream::CRYPTO_OFF === $crypto;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">if</span> (($context === null) &amp;&amp; !$isUnencrypted) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            $context = stream_context_get_default();</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            $opts = stream_context_get_options($context);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="keywordflow">if</span> (!isset($opts[<span class="stringliteral">&#39;ssl&#39;</span>][<span class="stringliteral">&#39;ciphers&#39;</span>])</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                || <span class="stringliteral">&#39;DEFAULT&#39;</span> === $opts[<span class="stringliteral">&#39;ssl&#39;</span>][<span class="stringliteral">&#39;ciphers&#39;</span>]</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            ) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                stream_context_set_option($context, <span class="stringliteral">&#39;ssl&#39;</span>, <span class="stringliteral">&#39;ciphers&#39;</span>, <span class="stringliteral">&#39;ADH&#39;</span>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="comment">// @codeCoverageIgnoreStart</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="comment">// The $port is customizable in testing.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">if</span> (null === $port) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            $port = $isUnencrypted ? 8728 : 8729;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="comment">// @codeCoverageIgnoreEnd</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            $this-&gt;trans = <span class="keyword">new</span> T\TcpClient(</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                $host,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                $port,</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                $persist,</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                $timeout,</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                $key,</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                $crypto,</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                $context</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            );</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        } <span class="keywordflow">catch</span> (T\<a class="code" href="interface_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_exception.html">Exception</a> $e) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_socket_exception.html">SocketException</a>(</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                <span class="stringliteral">&#39;Error connecting to RouterOS&#39;</span>,</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_socket_exception.html#abfc0532d2ae610904ea85c61b2d84983">SocketException::CODE_CONNECTION_FAIL</a>,</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                $e</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            );</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        $this-&gt;<a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a9185712d24c1c1642837d557b8a2068a">setCharset</a>(</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            self::getDefaultCharset(self::CHARSET_ALL),</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            self::CHARSET_ALL</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        );</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    </div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ae357effcbf0bfb040c9700a4ebf8e089">  175</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ae357effcbf0bfb040c9700a4ebf8e089">__invoke</a>($string = null)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">return</span> null === $string ? $this-&gt;<a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aced93198dfca2c52312a450bcca9edf6">getNextWord</a>()</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            : $this-&gt;<a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a2c3e38eb6749dd9a0d674425433e5358">sendWord</a>($string);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    </div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aacbe8a6f11b50666a98f75acf717ad63">  188</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aacbe8a6f11b50666a98f75acf717ad63">isSeekableStream</a>($var)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">if</span> (T\Stream::isStream($var)) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            $meta = stream_get_meta_data($var);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">return</span> $meta[<span class="stringliteral">&#39;seekable&#39;</span>];</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    </div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a0e0889b6df822d3c1660cf7e5963da6b">  210</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a0e0889b6df822d3c1660cf7e5963da6b">iconvStream</a>($inCharset, $outCharset, $stream)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        $bytes = 0;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        $result = fopen(<span class="stringliteral">&#39;php://temp&#39;</span>, <span class="stringliteral">&#39;r+b&#39;</span>);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        $iconvFilter = stream_filter_append(</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            $result,</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="stringliteral">&#39;convert.iconv.&#39;</span> . $inCharset . <span class="charliteral">&#39;.&#39;</span> . $outCharset,</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            STREAM_FILTER_WRITE</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        );</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        flock($stream, LOCK_SH);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">while</span> (!feof($stream)) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            $bytes += stream_copy_to_stream($stream, $result, 0xFFFFF);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        fseek($stream, -$bytes, SEEK_CUR);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        flock($stream, LOCK_UN);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        stream_filter_remove($iconvFilter);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        rewind($result);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="keywordflow">return</span> $result;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    </div>
<div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aadb845330f905f5ada89937d622f3a42">  248</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aadb845330f905f5ada89937d622f3a42">setDefaultCharset</a>(</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        $charset,</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        $charsetType = self::CHARSET_ALL</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    ) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">if</span> (array_key_exists($charsetType, self::$defaultCharsets)) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;             $oldCharset = self::$defaultCharsets[$charsetType];</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;             self::$defaultCharsets[$charsetType] = $charset;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;             <span class="keywordflow">return</span> $oldCharset;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            $oldCharsets = self::$defaultCharsets;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            self::$defaultCharsets = is_array($charset) ? $charset : array_fill(</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                0,</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                count(self::$defaultCharsets),</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                $charset</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            );</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="keywordflow">return</span> $oldCharsets;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    </div>
<div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a9762ee81c4f57638a91d496baf3d4b9d">  279</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a9762ee81c4f57638a91d496baf3d4b9d">getDefaultCharset</a>($charsetType)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">return</span> array_key_exists($charsetType, self::$defaultCharsets)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            ? self::$defaultCharsets[$charsetType] : self::$defaultCharsets;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aa0931d12981d1cd5236e278b67a1315f">  296</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aa0931d12981d1cd5236e278b67a1315f">seekableStreamLength</a>($stream)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        $streamPosition = (double) sprintf(<span class="stringliteral">&#39;%u&#39;</span>, ftell($stream));</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        fseek($stream, 0, SEEK_END);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        $streamLength = ((double) sprintf(<span class="stringliteral">&#39;%u&#39;</span>, ftell($stream)))</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            - $streamPosition;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        fseek($stream, $streamPosition, SEEK_SET);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">return</span> $streamLength;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    </div>
<div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a9185712d24c1c1642837d557b8a2068a">  329</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a9185712d24c1c1642837d557b8a2068a">setCharset</a>($charset, $charsetType = self::CHARSET_ALL)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">if</span> (array_key_exists($charsetType, $this-&gt;charsets)) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;             $oldCharset = $this-&gt;charsets[$charsetType];</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;             $this-&gt;charsets[$charsetType] = $charset;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;             <span class="keywordflow">return</span> $oldCharset;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            $oldCharsets = <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ae269ee30c94deb9b791c1ae5489b88f3">$this-&gt;charsets</a>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            $this-&gt;charsets = is_array($charset) ? $charset : array_fill(</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                0,</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                count($this-&gt;charsets),</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                $charset</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            );</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">return</span> $oldCharsets;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    </div>
<div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a5decc5fae7949754a8fa2228e9217dc0">  359</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a5decc5fae7949754a8fa2228e9217dc0">getCharset</a>($charsetType)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">return</span> array_key_exists($charsetType, $this-&gt;charsets)</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            ? $this-&gt;charsets[$charsetType] : <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ae269ee30c94deb9b791c1ae5489b88f3">$this-&gt;charsets</a>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a0e6a3522967a30691948ec0c8b3a0f8f">  370</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a0e6a3522967a30691948ec0c8b3a0f8f">getTransmitter</a>()</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ac75852aae94b46848119a6d7c922cf2e">$this-&gt;trans</a>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a2c3e38eb6749dd9a0d674425433e5358">  386</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a2c3e38eb6749dd9a0d674425433e5358">sendWord</a>($word)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">if</span> (null !== ($remoteCharset = $this-&gt;<a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a5decc5fae7949754a8fa2228e9217dc0">getCharset</a>(self::CHARSET_REMOTE))</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            &amp;&amp; null !== ($localCharset = $this-&gt;<a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a5decc5fae7949754a8fa2228e9217dc0">getCharset</a>(self::CHARSET_LOCAL))</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        ) {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            $word = iconv(</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                $localCharset,</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                $remoteCharset . <span class="stringliteral">&#39;//IGNORE//TRANSLIT&#39;</span>,</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                $word</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            );</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        $length = strlen($word);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        static::verifyLengthSupport($length);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;trans-&gt;isPersistent()) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            $old = $this-&gt;trans-&gt;lock(T\Stream::DIRECTION_SEND);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            $bytes = $this-&gt;trans-&gt;send(self::encodeLength($length) . $word);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            $this-&gt;trans-&gt;lock($old, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="keywordflow">return</span> $bytes;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">return</span> $this-&gt;trans-&gt;send(self::encodeLength($length) . $word);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a6550aae070b3b29113e559be33fb7475">  422</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a6550aae070b3b29113e559be33fb7475">sendWordFromStream</a>($prefix, $stream)</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">if</span> (!self::isSeekableStream($stream)) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_invalid_argument_exception.html">InvalidArgumentException</a>(</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                <span class="stringliteral">&#39;The stream must be seekable.&#39;</span>,</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_invalid_argument_exception.html#af13a0acc92a25ffe68ea906974d58fd6">InvalidArgumentException::CODE_SEEKABLE_REQUIRED</a></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            );</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">if</span> (null !== ($remoteCharset = $this-&gt;<a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a5decc5fae7949754a8fa2228e9217dc0">getCharset</a>(self::CHARSET_REMOTE))</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            &amp;&amp; null !== ($localCharset = $this-&gt;<a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a5decc5fae7949754a8fa2228e9217dc0">getCharset</a>(self::CHARSET_LOCAL))</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        ) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            $prefix = iconv(</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                $localCharset,</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                $remoteCharset . <span class="stringliteral">&#39;//IGNORE//TRANSLIT&#39;</span>,</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                $prefix</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            );</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            $stream = self::iconvStream(</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                $localCharset,</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                $remoteCharset . <span class="stringliteral">&#39;//IGNORE//TRANSLIT&#39;</span>,</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                $stream</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            );</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        flock($stream, LOCK_SH);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        $totalLength = strlen($prefix) + self::seekableStreamLength($stream);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        static::verifyLengthSupport($totalLength);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        $bytes = $this-&gt;trans-&gt;send(self::encodeLength($totalLength) . $prefix);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        $bytes += $this-&gt;trans-&gt;send($stream);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        flock($stream, LOCK_UN);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">return</span> $bytes;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div>
<div class="line"><a name="l00468"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aa7224ca66ead1dc0afb15469302a3783">  468</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aa7224ca66ead1dc0afb15469302a3783">verifyLengthSupport</a>($length)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">if</span> ($length &gt; 0xFFFFFFFF) {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_length_exception.html">LengthException</a>(</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                <span class="stringliteral">&#39;Words with length above 0xFFFFFFFF are not supported.&#39;</span>,</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_length_exception.html#a62819bcad242af75519187fa72773517">LengthException::CODE_UNSUPPORTED</a>,</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                null,</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                $length</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            );</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a70d02b49e99cd7ef5650bebbee5a5aea">  487</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a70d02b49e99cd7ef5650bebbee5a5aea">encodeLength</a>($length)</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">if</span> ($length &lt; 0) {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_length_exception.html">LengthException</a>(</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                <span class="stringliteral">&#39;Length must not be negative.&#39;</span>,</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_length_exception.html#a62d3afeb64562ccfd00f827ebbc02e3e">LengthException::CODE_INVALID</a>,</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                null,</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                $length</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            );</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        } elseif ($length &lt; 0x80) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            <span class="keywordflow">return</span> chr($length);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        } elseif ($length &lt; 0x4000) {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            <span class="keywordflow">return</span> pack(<span class="charliteral">&#39;n&#39;</span>, $length |= 0x8000);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        } elseif ($length &lt; 0x200000) {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            $length |= 0xC00000;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <span class="keywordflow">return</span> pack(<span class="charliteral">&#39;n&#39;</span>, $length &gt;&gt; 8) . chr($length &amp; 0xFF);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        } elseif ($length &lt; 0x10000000) {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            <span class="keywordflow">return</span> pack(<span class="charliteral">&#39;N&#39;</span>, $length |= 0xE0000000);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        } elseif ($length &lt;= 0xFFFFFFFF) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            <span class="keywordflow">return</span> chr(0xF0) . pack(<span class="charliteral">&#39;N&#39;</span>, $length);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        } elseif ($length &lt;= 0x7FFFFFFFF) {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            $length = <span class="charliteral">&#39;f&#39;</span> . base_convert($length, 10, 16);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            <span class="keywordflow">return</span> chr(hexdec(substr($length, 0, 2))) .</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                pack(<span class="charliteral">&#39;N&#39;</span>, hexdec(substr($length, 2)));</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_length_exception.html">LengthException</a>(</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="stringliteral">&#39;Length must not be above 0x7FFFFFFFF.&#39;</span>,</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_length_exception.html#a6710482454394cb8a5d76e46f2280251">LengthException::CODE_BEYOND_SHEME</a>,</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            null,</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            $length</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        );</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00529"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aced93198dfca2c52312a450bcca9edf6">  529</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aced93198dfca2c52312a450bcca9edf6">getNextWord</a>()</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;trans-&gt;isPersistent()) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            $old = $this-&gt;trans-&gt;lock(T\Stream::DIRECTION_RECEIVE);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            $word = $this-&gt;trans-&gt;receive(</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                self::decodeLength($this-&gt;trans),</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                <span class="stringliteral">&#39;word&#39;</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            );</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            $this-&gt;trans-&gt;lock($old, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            $word = $this-&gt;trans-&gt;receive(</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                self::decodeLength($this-&gt;trans),</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                <span class="stringliteral">&#39;word&#39;</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            );</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">if</span> (null !== ($remoteCharset = $this-&gt;<a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a5decc5fae7949754a8fa2228e9217dc0">getCharset</a>(self::CHARSET_REMOTE))</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            &amp;&amp; null !== ($localCharset = $this-&gt;<a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a5decc5fae7949754a8fa2228e9217dc0">getCharset</a>(self::CHARSET_LOCAL))</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        ) {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            $word = iconv(</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                $remoteCharset,</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                $localCharset . <span class="stringliteral">&#39;//IGNORE//TRANSLIT&#39;</span>,</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                $word</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            );</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">return</span> $word;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div>
<div class="line"><a name="l00567"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aad427c1d3d637aae778be1cb26ed0230">  567</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aad427c1d3d637aae778be1cb26ed0230">getNextWordAsStream</a>()</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        $filters = <span class="keyword">new</span> T\FilterCollection();</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordflow">if</span> (null !== ($remoteCharset = $this-&gt;<a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a5decc5fae7949754a8fa2228e9217dc0">getCharset</a>(self::CHARSET_REMOTE))</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            &amp;&amp; null !== ($localCharset = $this-&gt;<a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a5decc5fae7949754a8fa2228e9217dc0">getCharset</a>(self::CHARSET_LOCAL))</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        ) {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            $filters-&gt;append(</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                <span class="stringliteral">&#39;convert.iconv.&#39;</span> .</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                $remoteCharset . <span class="charliteral">&#39;.&#39;</span> . $localCharset . <span class="stringliteral">&#39;//IGNORE//TRANSLIT&#39;</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            );</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;trans-&gt;isPersistent()) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            $old = $this-&gt;trans-&gt;lock(T\Stream::DIRECTION_RECEIVE);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            $stream = $this-&gt;trans-&gt;receiveStream(</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                self::decodeLength($this-&gt;trans),</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                $filters,</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                <span class="stringliteral">&#39;stream word&#39;</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            );</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            $this-&gt;trans-&gt;lock($old, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            $stream = $this-&gt;trans-&gt;receiveStream(</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                self::decodeLength($this-&gt;trans),</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                $filters,</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                <span class="stringliteral">&#39;stream word&#39;</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            );</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">return</span> $stream;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div>
<div class="line"><a name="l00609"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ab1036bf4e0db98cbedfd5ce2e2dc6f98">  609</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ab1036bf4e0db98cbedfd5ce2e2dc6f98">decodeLength</a>(T\Stream <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ac75852aae94b46848119a6d7c922cf2e">$trans</a>)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="keywordflow">if</span> ($trans-&gt;isPersistent() &amp;&amp; $trans instanceof T\TcpClient) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            $old = $trans-&gt;lock($trans::DIRECTION_RECEIVE);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            $length = self::_decodeLength($trans);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            $trans-&gt;lock($old, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <span class="keywordflow">return</span> $length;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">return</span> self::_decodeLength($trans);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">function</span> _decodeLength(T\Stream <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ac75852aae94b46848119a6d7c922cf2e">$trans</a>)</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        $byte = ord($trans-&gt;receive(1, <span class="stringliteral">&#39;initial length byte&#39;</span>));</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="keywordflow">if</span> ($byte &amp; 0x80) {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            <span class="keywordflow">if</span> (($byte &amp; 0xC0) === 0x80) {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                <span class="keywordflow">return</span> (($byte &amp; 077) &lt;&lt; 8 ) + ord($trans-&gt;receive(1));</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            } elseif (($byte &amp; 0xE0) === 0xC0) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                $rem = unpack(<span class="stringliteral">&#39;n~&#39;</span>, $trans-&gt;receive(2));</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                <span class="keywordflow">return</span> (($byte &amp; 037) &lt;&lt; 16 ) + $rem[<span class="charliteral">&#39;~&#39;</span>];</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            } elseif (($byte &amp; 0xF0) === 0xE0) {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                $rem = unpack(<span class="stringliteral">&#39;n~/C~~&#39;</span>, $trans-&gt;receive(3));</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                <span class="keywordflow">return</span> (($byte &amp; 017) &lt;&lt; 24 ) + ($rem[<span class="charliteral">&#39;~&#39;</span>] &lt;&lt; 8) + $rem[<span class="stringliteral">&#39;~~&#39;</span>];</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            } elseif (($byte &amp; 0xF8) === 0xF0) {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                $rem = unpack(<span class="stringliteral">&#39;N~&#39;</span>, $trans-&gt;receive(4));</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                <span class="keywordflow">return</span> (($byte &amp; 007) * 0x100000000<span class="comment">/* &#39;&lt;&lt; 32&#39; or &#39;2^32&#39; */</span>)</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                    + (<span class="keywordtype">double</span>) sprintf(<span class="stringliteral">&#39;%u&#39;</span>, $rem[<span class="charliteral">&#39;~&#39;</span>]);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> NotSupportedException(</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                <span class="stringliteral">&#39;Unknown control byte encountered.&#39;</span>,</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_not_supported_exception.html#aa97f340051ba7bd54bf01cefff9bb6fb">NotSupportedException::CODE_CONTROL_BYTE</a>,</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                null,</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                $byte</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            );</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            <span class="keywordflow">return</span> $byte;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    }</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div>
<div class="line"><a name="l00667"></a><span class="lineno"><a class="line" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aa69c8bf1f1dcf4e72552efff1fe3e87e">  667</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aa69c8bf1f1dcf4e72552efff1fe3e87e">close</a>()</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="keywordflow">return</span> $this-&gt;trans-&gt;close();</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;}</div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_a0e6a3522967a30691948ec0c8b3a0f8f"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a0e6a3522967a30691948ec0c8b3a0f8f">PEAR2\Net\RouterOS\Communicator\getTransmitter</a></div><div class="ttdeci">getTransmitter()</div><div class="ttdoc">Gets the transmitter for this connection. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00370">Communicator.php:370</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_invalid_argument_exception_html_af13a0acc92a25ffe68ea906974d58fd6"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_invalid_argument_exception.html#af13a0acc92a25ffe68ea906974d58fd6">PEAR2\Net\RouterOS\InvalidArgumentException\CODE_SEEKABLE_REQUIRED</a></div><div class="ttdeci">const CODE_SEEKABLE_REQUIRED</div><div class="ttdef"><b>Definition:</b> <a href="_invalid_argument_exception_8php_source.html#l00036">InvalidArgumentException.php:36</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_a70d02b49e99cd7ef5650bebbee5a5aea"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a70d02b49e99cd7ef5650bebbee5a5aea">PEAR2\Net\RouterOS\Communicator\encodeLength</a></div><div class="ttdeci">static encodeLength($length)</div><div class="ttdoc">Encodes the length as requred by the RouterOS API. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00487">Communicator.php:487</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_a9185712d24c1c1642837d557b8a2068a"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a9185712d24c1c1642837d557b8a2068a">PEAR2\Net\RouterOS\Communicator\setCharset</a></div><div class="ttdeci">setCharset($charset, $charsetType=self::CHARSET_ALL)</div><div class="ttdoc">Sets the charset(s) for this connection. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00329">Communicator.php:329</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_invalid_argument_exception_html"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_invalid_argument_exception.html">PEAR2\Net\RouterOS\InvalidArgumentException</a></div><div class="ttdef"><b>Definition:</b> <a href="_invalid_argument_exception_8php_source.html#l00034">InvalidArgumentException.php:34</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_a2c3e38eb6749dd9a0d674425433e5358"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a2c3e38eb6749dd9a0d674425433e5358">PEAR2\Net\RouterOS\Communicator\sendWord</a></div><div class="ttdeci">sendWord($word)</div><div class="ttdoc">Sends a word. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00386">Communicator.php:386</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_af5a8a11fc100eb8f83467fc4a88d5324"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#af5a8a11fc100eb8f83467fc4a88d5324">PEAR2\Net\RouterOS\Communicator\CHARSET_LOCAL</a></div><div class="ttdeci">const CHARSET_LOCAL</div><div class="ttdoc">Used when getting/setting the (default) local charset. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00067">Communicator.php:67</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_length_exception_html_a62819bcad242af75519187fa72773517"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_length_exception.html#a62819bcad242af75519187fa72773517">PEAR2\Net\RouterOS\LengthException\CODE_UNSUPPORTED</a></div><div class="ttdeci">const CODE_UNSUPPORTED</div><div class="ttdef"><b>Definition:</b> <a href="_length_exception_8php_source.html#l00040">LengthException.php:40</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_a60cf02f6ed2d0bb98867d38cabc4ca5d"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a60cf02f6ed2d0bb98867d38cabc4ca5d">PEAR2\Net\RouterOS\Communicator\CHARSET_ALL</a></div><div class="ttdeci">const CHARSET_ALL</div><div class="ttdoc">Used when getting/setting all (default) charsets. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00049">Communicator.php:49</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_a6550aae070b3b29113e559be33fb7475"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a6550aae070b3b29113e559be33fb7475">PEAR2\Net\RouterOS\Communicator\sendWordFromStream</a></div><div class="ttdeci">sendWordFromStream($prefix, $stream)</div><div class="ttdoc">Sends a word based on a stream. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00422">Communicator.php:422</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_a3fb4c9535d68ae71e3b82f25a5c61510"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a3fb4c9535d68ae71e3b82f25a5c61510">PEAR2\Net\RouterOS\Communicator\$defaultCharsets</a></div><div class="ttdeci">static $defaultCharsets</div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00073">Communicator.php:73</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_a9762ee81c4f57638a91d496baf3d4b9d"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a9762ee81c4f57638a91d496baf3d4b9d">PEAR2\Net\RouterOS\Communicator\getDefaultCharset</a></div><div class="ttdeci">static getDefaultCharset($charsetType)</div><div class="ttdoc">Gets the default charset(s). </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00279">Communicator.php:279</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_aa0931d12981d1cd5236e278b67a1315f"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aa0931d12981d1cd5236e278b67a1315f">PEAR2\Net\RouterOS\Communicator\seekableStreamLength</a></div><div class="ttdeci">static seekableStreamLength($stream)</div><div class="ttdoc">Gets the length of a seekable stream. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00296">Communicator.php:296</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_ae069d6168ef5b97ed220f308670db940"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ae069d6168ef5b97ed220f308670db940">PEAR2\Net\RouterOS\Communicator\CHARSET_REMOTE</a></div><div class="ttdeci">const CHARSET_REMOTE</div><div class="ttdoc">Used when getting/setting the (default) remote charset. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00058">Communicator.php:58</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_a5decc5fae7949754a8fa2228e9217dc0"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a5decc5fae7949754a8fa2228e9217dc0">PEAR2\Net\RouterOS\Communicator\getCharset</a></div><div class="ttdeci">getCharset($charsetType)</div><div class="ttdoc">Gets the charset(s) for this connection. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00359">Communicator.php:359</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_a0e0889b6df822d3c1660cf7e5963da6b"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a0e0889b6df822d3c1660cf7e5963da6b">PEAR2\Net\RouterOS\Communicator\iconvStream</a></div><div class="ttdeci">static iconvStream($inCharset, $outCharset, $stream)</div><div class="ttdoc">Uses iconv to convert a stream from one charset to another. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00210">Communicator.php:210</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_aa69c8bf1f1dcf4e72552efff1fe3e87e"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aa69c8bf1f1dcf4e72552efff1fe3e87e">PEAR2\Net\RouterOS\Communicator\close</a></div><div class="ttdeci">close()</div><div class="ttdoc">Closes the opened connection, even if it is a persistent one. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00667">Communicator.php:667</a></div></div>
<div class="ttc" id="interface_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_exception_html"><div class="ttname"><a href="interface_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_exception.html">PEAR2\Net\RouterOS\Exception</a></div><div class="ttdef"><b>Definition:</b> <a href="_exception_8php_source.html#l00032">Exception.php:32</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_ae357effcbf0bfb040c9700a4ebf8e089"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ae357effcbf0bfb040c9700a4ebf8e089">PEAR2\Net\RouterOS\Communicator\__invoke</a></div><div class="ttdeci">__invoke($string=null)</div><div class="ttdoc">A shorthand gateway. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00175">Communicator.php:175</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_not_supported_exception_html_aa97f340051ba7bd54bf01cefff9bb6fb"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_not_supported_exception.html#aa97f340051ba7bd54bf01cefff9bb6fb">PEAR2\Net\RouterOS\NotSupportedException\CODE_CONTROL_BYTE</a></div><div class="ttdeci">const CODE_CONTROL_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="_not_supported_exception_8php_source.html#l00041">NotSupportedException.php:41</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_aadb845330f905f5ada89937d622f3a42"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aadb845330f905f5ada89937d622f3a42">PEAR2\Net\RouterOS\Communicator\setDefaultCharset</a></div><div class="ttdeci">static setDefaultCharset($charset, $charsetType=self::CHARSET_ALL)</div><div class="ttdoc">Sets the default charset(s) for new connections. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00248">Communicator.php:248</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_aad427c1d3d637aae778be1cb26ed0230"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aad427c1d3d637aae778be1cb26ed0230">PEAR2\Net\RouterOS\Communicator\getNextWordAsStream</a></div><div class="ttdeci">getNextWordAsStream()</div><div class="ttdoc">Get the next word in queue as a stream. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00567">Communicator.php:567</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_aced93198dfca2c52312a450bcca9edf6"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aced93198dfca2c52312a450bcca9edf6">PEAR2\Net\RouterOS\Communicator\getNextWord</a></div><div class="ttdeci">getNextWord()</div><div class="ttdoc">Get the next word in queue as a string. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00529">Communicator.php:529</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_ae269ee30c94deb9b791c1ae5489b88f3"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ae269ee30c94deb9b791c1ae5489b88f3">PEAR2\Net\RouterOS\Communicator\$charsets</a></div><div class="ttdeci">$charsets</div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00082">Communicator.php:82</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_a313217fc0e0cc04f49c0e637b2f64271"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#a313217fc0e0cc04f49c0e637b2f64271">PEAR2\Net\RouterOS\Communicator\__construct</a></div><div class="ttdeci">__construct($host, $port=8728, $persist=false, $timeout=null, $key= '', $crypto=T\NetworkStream::CRYPTO_OFF, $context=null)</div><div class="ttdoc">Creates a new connection with the specified options. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00113">Communicator.php:113</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_aacbe8a6f11b50666a98f75acf717ad63"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aacbe8a6f11b50666a98f75acf717ad63">PEAR2\Net\RouterOS\Communicator\isSeekableStream</a></div><div class="ttdeci">static isSeekableStream($var)</div><div class="ttdoc">Checks whether a variable is a seekable stream resource. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00188">Communicator.php:188</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_length_exception_html_a6710482454394cb8a5d76e46f2280251"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_length_exception.html#a6710482454394cb8a5d76e46f2280251">PEAR2\Net\RouterOS\LengthException\CODE_BEYOND_SHEME</a></div><div class="ttdeci">const CODE_BEYOND_SHEME</div><div class="ttdef"><b>Definition:</b> <a href="_length_exception_8php_source.html#l00042">LengthException.php:42</a></div></div>
<div class="ttc" id="namespace_p_e_a_r2_1_1_net_1_1_router_o_s_html"><div class="ttname"><a href="namespace_p_e_a_r2_1_1_net_1_1_router_o_s.html">PEAR2\Net\RouterOS</a></div><div class="ttdoc">The namespace declaration. </div><div class="ttdef"><b>Definition:</b> <a href="_client_8php_source.html#l00021">Client.php:21</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_socket_exception_html"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_socket_exception.html">PEAR2\Net\RouterOS\SocketException</a></div><div class="ttdef"><b>Definition:</b> <a href="_socket_exception_8php_source.html#l00037">SocketException.php:37</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html">PEAR2\Net\RouterOS\Communicator</a></div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00044">Communicator.php:44</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_aa7224ca66ead1dc0afb15469302a3783"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#aa7224ca66ead1dc0afb15469302a3783">PEAR2\Net\RouterOS\Communicator\verifyLengthSupport</a></div><div class="ttdeci">static verifyLengthSupport($length)</div><div class="ttdoc">Verifies that the length is supported. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00468">Communicator.php:468</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_length_exception_html"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_length_exception.html">PEAR2\Net\RouterOS\LengthException</a></div><div class="ttdef"><b>Definition:</b> <a href="_length_exception_8php_source.html#l00037">LengthException.php:37</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_socket_exception_html_abfc0532d2ae610904ea85c61b2d84983"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_socket_exception.html#abfc0532d2ae610904ea85c61b2d84983">PEAR2\Net\RouterOS\SocketException\CODE_CONNECTION_FAIL</a></div><div class="ttdeci">const CODE_CONNECTION_FAIL</div><div class="ttdef"><b>Definition:</b> <a href="_socket_exception_8php_source.html#l00040">SocketException.php:40</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_ac75852aae94b46848119a6d7c922cf2e"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ac75852aae94b46848119a6d7c922cf2e">PEAR2\Net\RouterOS\Communicator\$trans</a></div><div class="ttdeci">$trans</div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00087">Communicator.php:87</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator_html_ab1036bf4e0db98cbedfd5ce2e2dc6f98"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_communicator.html#ab1036bf4e0db98cbedfd5ce2e2dc6f98">PEAR2\Net\RouterOS\Communicator\decodeLength</a></div><div class="ttdeci">static decodeLength(T\Stream $trans)</div><div class="ttdoc">Decodes the lenght of the incoming message. </div><div class="ttdef"><b>Definition:</b> <a href="_communicator_8php_source.html#l00609">Communicator.php:609</a></div></div>
<div class="ttc" id="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_length_exception_html_a62d3afeb64562ccfd00f827ebbc02e3e"><div class="ttname"><a href="class_p_e_a_r2_1_1_net_1_1_router_o_s_1_1_length_exception.html#a62d3afeb64562ccfd00f827ebbc02e3e">PEAR2\Net\RouterOS\LengthException\CODE_INVALID</a></div><div class="ttdeci">const CODE_INVALID</div><div class="ttdef"><b>Definition:</b> <a href="_length_exception_8php_source.html#l00041">LengthException.php:41</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d04e140f9465157625d435669917c5a2.html">PEAR2</a></li><li class="navelem"><a class="el" href="dir_f2c88f2672a84ff0014ffef4984855df.html">Net</a></li><li class="navelem"><a class="el" href="dir_8c2439f21dc4d80339d5df518fa4618f.html">RouterOS</a></li><li class="navelem"><a class="el" href="_communicator_8php.html">Communicator.php</a></li>
    <li class="footer">Generated on Sun Nov 2 2014 08:21:02 for PEAR2_Net_RouterOS by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
